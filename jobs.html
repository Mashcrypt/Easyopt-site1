<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Jobs â€“ Career Unified</title>
<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
<meta name="description" content="Browse verified jobs in South Africa. Filter by company, location, salary and apply instantly on Career Unified.">


<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/jobs.css">
<style>
/* =============================== */
/* RESET BODY & GLOBAL LAYOUT */
body {
  margin: 0;
  padding: 0;
  font-family: 'Poppins', sans-serif;
  background: #f5f5f7;
  color: #111827;
  overflow-x: hidden;
}

/* =============================== */
/* NAVBAR FULL WIDTH */
.main-nav {
  padding: 14px 30px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100vw;
  box-sizing: border-box;
  background: #1e3a8a;
}

.main-nav .logo {
  color: #fff;
  font-size: 1.4rem;
  font-weight: 700;
  text-decoration: none;
}

.main-nav .nav-links a {
  color: #fff;
  text-decoration: none;
  margin-left: 22px;
  font-weight: 600;
  padding-bottom: 4px;
}

.main-nav .nav-links a.active {
  border-bottom: 3px solid #facc15;
}

/* =============================== */
/* HEADER */
header {
  text-align: center;
  padding: 70px 15px 55px;
  background: linear-gradient(90deg, #1e3a8a, #2563eb);
  color: #fff;
  width: 100vw;
  box-sizing: border-box;
}

header h1 {
  margin: 0;
  font-size: 3rem;
  font-weight: 800;
}

header p {
  margin-top: 10px;
  font-size: 1.2rem;
  color: #e5e7eb;
}

/* =============================== */
/* Jobs Page Styles */
.jobs-container {
  display: flex;
  max-width: 1200px;
  margin: 30px auto;
  gap: 20px;
}
.jobs-left { flex: 1; }

.jobs-preview {
  flex: 1;
  background: #fff;
  border-radius: 10px;
  padding: 20px;
  box-shadow: 0 3px 8px rgba(0,0,0,0.1);
  min-height: 420px;
}

.job-card {
  background: #fff;
  border-radius: 10px;
  padding: 12px 14px;
  box-shadow: 0 3px 8px rgba(0,0,0,0.1);
  cursor: pointer;
  transition: 0.25s ease;
  position: relative;
}

.job-card:hover {
  background-color: #d0e7ff;
  transform: translateY(-2px);
}

.job-card.selected {
  border-left: 4px solid #facc15;
}

.job-badge {
  position: absolute;
  top: 10px;
  right: 12px;
  padding: 2px 8px;
  background: #facc15;
  color: #1e3a8a;
  font-size: 11px;
  font-weight: 700;
  border-radius: 6px;
}

.jobs-preview h2 { color:#1e3a8a; }

/* Search Filter */
.search-filter-container {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
}

/* Fade Animation */
.fade-in {
  animation: fadeIn 0.35s ease;
}

@keyframes fadeIn {
  from { opacity:0; transform: translateY(8px); }
  to { opacity:1; transform: translateY(0); }
}

.apply-btn {
  display: inline-block;
  margin-top: 15px;
  background: #16a34a;
  color: white;
  padding: 8px 14px;
  border-radius: 6px;
  font-weight: 600;
  text-decoration: none;
}

  /* ================================
   Skeleton Loading (Jobs Page)
================================ */

.skeleton {
  background-color: #e5e7eb;
  border-radius: 10px;
  position: relative;
  overflow: hidden;
}

.skeleton::after {
  content: "";
  position: absolute;
  inset: 0;
  transform: translateX(-100%);
  background: linear-gradient(
    90deg,
    rgba(255,255,255,0) 0%,
    rgba(255,255,255,0.6) 50%,
    rgba(255,255,255,0) 100%
  );
  animation: skeleton-shimmer 1.3s infinite;
}

@keyframes skeleton-shimmer {
  100% {
    transform: translateX(100%);
  }
}

/* Job card placeholder */
.skeleton-job {
  height: 95px;
  margin-bottom: 12px;
}

/* Make skeletons look like real cards */
.job-card.skeleton {
  box-shadow: none;
  background-color: #e5e7eb;
}

/* Disable hover on skeletons */
.job-card.skeleton:hover {
  background-color: #e5e7eb;
  transform: none;
  cursor: default;
}

  
</style>
</head>

<body>

<nav class="main-nav">
  <a href="index.html" class="logo">Career Unified</a>
  <div class="nav-links">
    <a href="jobs.html" class="active">Jobs</a>
    <a href="bursaries.html">Bursaries</a>
    <a href="varsity.html">Varsity</a>
    <a href="cv-generator.html">Generate CV</a>
  </div>
</nav>

<header>
  <h1>Available Jobs</h1>
  <p>Find your next opportunity</p>
</header>

<main class="jobs-container">
  <div class="jobs-left">
    <div class="search-filter-container">
      <input type="text" id="jobSearch" placeholder="Search job title, company, keyword">
      <select id="categoryFilter">
        <option value="all">All Categories</option>
        <option value="internship">Internship / Graduate</option>
        <option value="temporary">Temporary</option>
        <option value="freelance">Freelance</option>
      </select>
      <button id="sortBtn">Sort by Closing Date</button>
    </div>
    <ul class="jobs-list" id="jobList"></ul>
  </div>

  <div class="jobs-preview" id="jobPreview">
    <p>Select a job to view details</p>
  </div>
  
  <!-- SEO FALLBACK CONTENT (invisible to users, readable by Google) -->
<section aria-hidden="true" style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;">
  <h2>Latest Jobs in South Africa</h2>
  <p>
    Career Unified lists verified job opportunities across South Africa including
    IT, finance, retail, engineering, hospitality, government, and graduate roles.
  </p>
  <p>
    Our platform updates daily to help job seekers find full-time, part-time,
    remote, and internship positions from trusted employers.
  </p>
  <p>
    Use Career Unified to search, filter, and apply for jobs across all provinces
    in South Africa.
  </p>
</section>

</main>

<!-- FOOTER -->
<footer class="main-footer">
  <div class="footer-links">
    <a href="about-us.html">About Us</a>
    <a href="privacy.html">Privacy Policy</a>
    <a href="terms.html">Terms & Conditions</a>
    <a href="contact-us.html">Contact Us</a>
  </div>
  <p>Â© 2026 Career Unified. All rights reserved.</p>
</footer>

<script src="js/sanityClient.js"></script>

<script>
const jobList = document.getElementById('jobList');
const jobPreview = document.getElementById('jobPreview');

/* ================================
   GLOBAL SEARCH (HOMEPAGE â†’ JOBS)
================================ */
let globalSearch = localStorage.getItem("homeSearchTerm");

// use once then clear
if (globalSearch) {
  localStorage.removeItem("homeSearchTerm");
}

/* ================================
   CACHE SYSTEM
================================ */
const CACHE_KEY = "careerUnifiedJobsCache";
const CACHE_TIME_KEY = "careerUnifiedJobsCacheTime";
const CACHE_TTL = 5 * 60 * 1000; // 5 minutes

let jobs = [];
let selectedIndex = null;

/* ================================
   SKELETON LOADER (UI HOOK)
================================ */
function showSkeletons() {
  jobList.innerHTML = "";
  for (let i = 0; i < 6; i++) {
    const li = document.createElement("li");
    li.className = "job-card skeleton skeleton-job";
    jobList.appendChild(li);
  }
}

/* ================================
   LOAD CACHE INSTANTLY
================================ */
loadCachedJobs();

function loadCachedJobs() {
  const cached = localStorage.getItem(CACHE_KEY);
  if (!cached) return;

  try {
    jobs = JSON.parse(cached);
    renderJobs();
    console.log("âš¡ Loaded jobs from cache");
  } catch (e) {
    console.warn("Cache invalid");
  }
}

/* ================================
   SANITY FETCH (BACKGROUND UPDATE)
================================ */
async function fetchJobs() {
  let query = `*[_type == "job"]`;

  if (globalSearch && globalSearch.trim() !== "") {
    query = `*[_type=="job" && (
      title match "*${globalSearch}*" ||
      company match "*${globalSearch}*" ||
      category match "*${globalSearch}*" ||
      location match "*${globalSearch}*" ||
      description match "*${globalSearch}*"
    )]`;
  }

  try {
    const fresh = await window.sanityClient.fetch(`${query}{
      _id,
      title,
      company,
      description,
      location,
      salary,
      applyLink,
      posted,
      deadline,
      category,
      jobType,
      listingTier,
      sponsoredUntil,
      badge
    }`);

    jobs = fresh;

    localStorage.setItem(CACHE_KEY, JSON.stringify(fresh));
    localStorage.setItem(CACHE_TIME_KEY, Date.now());

    if (globalSearch) {
      document.getElementById("jobSearch").value = globalSearch;
    }

    renderJobs();
    console.log("ðŸ”„ Jobs updated from Sanity");

  } catch (err) {
    console.error("Sanity failed â€” using cache", err);
  }
}

/* ================================
   SCHEMA INJECTION
================================ */
function injectJobSchema(job) {
  const schema = {
    "@context": "https://schema.org",
    "@type": "JobPosting",
    "title": job.title,
    "description": job.description,
    "datePosted": job.posted,
    "validThrough": job.deadline,
    "employmentType": job.jobType || "FULL_TIME",
    "hiringOrganization": {
      "@type": "Organization",
      "name": job.company || "Confidential",
      "sameAs": "https://careerunified.com"
    },
    "jobLocation": {
      "@type": "Place",
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "ZA"
      }
    },
    "baseSalary": job.salary ? {
      "@type": "MonetaryAmount",
      "currency": "ZAR",
      "value": {
        "@type": "QuantitativeValue",
        "value": job.salary,
        "unitText": "MONTH"
      }
    } : undefined,
    "url": job.applyLink
  };

  const old = document.getElementById("job-schema");
  if (old) old.remove();

  const script = document.createElement("script");
  script.id = "job-schema";
  script.type = "application/ld+json";
  script.textContent = JSON.stringify(schema);
  document.head.appendChild(script);
}

/* ================================
   PRIORITY SORT
================================ */
function getPriority(job) {
  const today = new Date();
  if ((job.listingTier === 'premier' || job.listingTier === 'sponsored') && job.sponsoredUntil) {
    if (new Date(job.sponsoredUntil) < today) return 0;
  }
  if (job.listingTier === 'premier') return 2;
  if (job.listingTier === 'sponsored') return 1;
  return 0;
}

/* ================================
   RENDER
================================ */
function renderJobs() {
  const searchTerm = document.getElementById('jobSearch').value.toLowerCase();
  const category = document.getElementById('categoryFilter').value;

  const filtered = jobs
    .filter(j => {
      return (category === 'all' || j.category === category) &&
        (j.title.toLowerCase().includes(searchTerm) ||
         j.company.toLowerCase().includes(searchTerm) ||
         j.description.toLowerCase().includes(searchTerm));
    })
    .sort((a,b) => {
      const pDiff = getPriority(b) - getPriority(a);
      if (pDiff !== 0) return pDiff;
      return new Date(a.deadline) - new Date(b.deadline);
    });

  jobList.innerHTML = "";

  filtered.forEach((job, index) => {
    const li = document.createElement("li");
    li.className = "job-card";
    if (index === selectedIndex) li.classList.add("selected");

    let badgeText = job.badge ||
      (job.listingTier === 'premier' ? 'Premier' :
       job.listingTier === 'sponsored' ? 'Sponsored' : '');

    li.innerHTML = `
      ${badgeText ? `<span class="job-badge">${badgeText}</span>` : ''}
      <h3>${job.title}</h3>
      <p><strong>Company:</strong> ${job.company}</p>
      <p><strong>Location:</strong> ${job.location}</p>
      <p><strong>Salary:</strong> ${job.salary || 'N/A'}</p>
      <p><strong>Closing:</strong> ${job.deadline}</p>
    `;

    li.onclick = () => {
      selectedIndex = index;
      showPreview(job);
      renderJobs();
    };

    jobList.appendChild(li);
  });
}

/* ================================
   PREVIEW
================================ */
function showPreview(job) {
  let badgeText = job.badge ||
    (job.listingTier === 'premier' ? 'Premier' :
     job.listingTier === 'sponsored' ? 'Sponsored' : '');

  jobPreview.innerHTML = `
    <div class="fade-in">
      ${badgeText ? `<span class="job-badge">${badgeText}</span>` : ''}
      <h2>${job.title}</h2>
      <p><strong>Company:</strong> ${job.company}</p>
      <p><strong>Location:</strong> ${job.location}</p>
      <p><strong>Salary:</strong> ${job.salary || 'N/A'}</p>
      <p><strong>Posted:</strong> ${job.posted} | <strong>Closing:</strong> ${job.deadline}</p>
      <div style="white-space:pre-line;margin-top:12px;">${job.description}</div>
      <a class="apply-btn" href="${job.applyLink}" target="_blank">Apply Now</a>
    </div>
  `;
  injectJobSchema(job);
}

/* ================================
   EVENTS
================================ */
document.getElementById("jobSearch").addEventListener("input", () => {
  globalSearch = null;
  renderJobs();
});
document.getElementById("categoryFilter").addEventListener("change", renderJobs);
document.getElementById("sortBtn").addEventListener("click", renderJobs);

/* ================================
   STARTUP
================================ */
showSkeletons();

const last = localStorage.getItem(CACHE_TIME_KEY);
if (!last || Date.now() - last > CACHE_TTL) {
  fetchJobs();
} else {
  fetchJobs(); // background refresh
}

setInterval(fetchJobs, 5 * 60 * 1000);
</script>


</body>
</html>






















































