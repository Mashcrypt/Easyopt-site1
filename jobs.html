<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Jobs – Career Unified</title>
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/jobs.css">

<style>
/* =============================== */
/* RESET BODY & GLOBAL LAYOUT */
body {
  margin: 0;
  padding: 0;
  font-family: 'Poppins', sans-serif;
  background: #f5f5f7;
  color: #111827;
  overflow-x: hidden;
}

/* =============================== */
/* NAVBAR FULL WIDTH */
.main-nav {
  padding: 14px 30px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100vw;
  box-sizing: border-box;
  background: #1e3a8a;
}
.main-nav .logo {
  color: #fff;
  font-size: 1.4rem;
  font-weight: 700;
  text-decoration: none;
}
.main-nav .nav-links a {
  color: #fff;
  text-decoration: none;
  margin-left: 22px;
  font-weight: 600;
  padding-bottom: 4px;
}
.main-nav .nav-links a.active {
  border-bottom: 3px solid #facc15;
}

/* =============================== */
/* HEADER FULL WIDTH WITH GRADIENT */
header {
  text-align: center;
  padding: 70px 15px 55px;
  background: linear-gradient(90deg, #1e3a8a, #2563eb);
  color: #fff;
  margin: 0;
  width: 100vw;
  border-radius: 0;
  box-sizing: border-box;
}
header h1 {
  margin: 0;
  font-size: 3rem;
  font-weight: 800;
  letter-spacing: 0.5px;
}
header p {
  margin-top: 10px;
  font-size: 1.2rem;
  font-weight: 500;
  color: #e5e7eb;
}

/* =============================== */
/* Jobs Page Styles */
.jobs-container {
  display: flex;
  max-width: 1200px;
  margin: 30px auto;
  gap: 20px;
}
.jobs-left { flex: 1; }
.jobs-preview {
  flex: 1;
  background: #fff;
  border-radius: 10px;
  padding: 20px;
  box-shadow: 0 3px 8px rgba(0,0,0,0.1);
  min-height: 420px;
}
.job-card {
  background: #fff;
  border-radius: 10px;
  padding: 12px 14px;
  box-shadow: 0 3px 8px rgba(0,0,0,0.1);
  cursor: pointer;
  transition: 0.25s ease;
  position: relative;
}
.job-card:hover {
  background-color: #d0e7ff;
  transform: translateY(-2px);
  box-shadow: 0 6px 14px rgba(0,0,0,0.15);
}
.job-card.selected {
  border-left: 4px solid #facc15;
}
.job-card h3 { margin: 0 0 3px; font-size: 15px; font-weight: 600; color: #1e3a8a; }
.job-card .company, .job-card .meta, .job-card .salary { font-size: 13px; color: #111827; margin: 2px 0; }

/* Badge */
.job-badge {
  position: absolute;
  top: 10px;
  right: 12px;
  padding: 2px 8px;
  background: #facc15;
  color: #1e3a8a;
  font-size: 11px;
  font-weight: 700;
  border-radius: 6px;
}

/* Preview */
.jobs-preview h2 { color:#1e3a8a; }
.jobs-preview p { margin: 6px 0; }

/* Search Filter */
.search-filter-container {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
}
.search-filter-container input, .search-filter-container select, .search-filter-container button {
  padding: 8px 10px;
  border-radius: 6px;
  border: 1px solid #ccc;
  font-size: 14px;
}
.search-filter-container button {
  background: #1e3a8a;
  color: white;
  font-weight: 600;
  cursor: pointer;
  border: none;
}
.search-filter-container button:hover { background: #162c6f; }

/* Fade Animation */
.fade-in { animation: fadeIn 0.35s ease; }
@keyframes fadeIn {
  from { opacity:0; transform: translateY(8px); }
  to { opacity:1; transform: translateY(0); }
}

/* Apply button */
.apply-btn {
  display: inline-block;
  margin-top: 15px;
  background: #16a34a;
  color: white;
  padding: 8px 14px;
  border-radius: 6px;
  font-weight: 600;
  text-decoration: none;
}

/* Scroll Buttons */
.scroll-btn {
  position: fixed;
  right: 20px;
  padding: 10px 14px;
  border-radius: 50%;
  border: none;
  background: #1e3a8a;
  color: white;
  cursor: pointer;
  display: none;
  z-index: 999;
}
#scrollUp { bottom: 80px; }
#scrollDown { bottom: 30px; }

@media (max-width: 900px) {
  .jobs-container { flex-direction: column; }
}
</style>
</head>

<body>

<!-- NAVIGATION -->
<nav class="main-nav">
  <a href="index.html" class="logo">Career Unified</a>
  <div class="nav-links">
    <a href="jobs.html" class="active">Jobs</a>
    <a href="bursaries.html">Bursaries</a>
    <a href="varsity.html">Varsity</a>
    <a href="cv-generator.html">Generate CV</a>
    <a href="signup.html">Sign Up</a>
    <a href="login.html">Login</a>
  </div>
</nav>

<!-- HEADER -->
<header>
  <h1>Available Jobs</h1>
  <p>Find your next opportunity</p>
</header>

<!-- MAIN JOBS CONTAINER -->
<main class="jobs-container">
  <div class="jobs-left">
    <div class="search-filter-container">
      <input type="text" id="jobSearch" placeholder="Search job title, company, keyword">
      <select id="categoryFilter">
        <option value="all">All Categories</option>
        <option value="internship">Internship / Graduate</option>
        <option value="temporary">Temporary</option>
        <option value="freelance">Freelance</option>
      </select>
      <button id="sortBtn">Sort by Closing Date</button>
    </div>
    <ul class="jobs-list" id="jobList"></ul>
  </div>
  <div class="jobs-preview" id="jobPreview">
    <p>Select a job to view details</p>
  </div>
</main>

<!-- FOOTER -->
<footer class="main-footer">
  <div class="footer-links">
    <a href="about-us.html">About Us</a>
    <a href="privacy.html">Privacy Policy</a>
    <a href="terms.html">Terms & Conditions</a>
    <a href="contact-us.html">Contact Us</a>
  </div>
  <p>© 2026 Career Unified. All rights reserved.</p>
</footer>

<!-- SCROLL BUTTONS -->
<button id="scrollUp" class="scroll-btn">↑</button>
<button id="scrollDown" class="scroll-btn">↓</button>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyAEBbnXPlYYf9jbfgLSzfod3r0i5MOAo9M",
  authDomain: "career-unified.firebaseapp.com",
  projectId: "career-unified",
  storageBucket: "career-unified.appspot.com",
  messagingSenderId: "101656817742",
  appId: "1:101656817742:web:22c9a58a822a714e54931f",
  measurementId: "G-2Z934XRVXT"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

let currentUser = null;
onAuthStateChanged(auth, user => currentUser = user);
</script>

<!-- SANITY CLIENT -->
<script src="js/sanityClient.js"></script>

<!-- JOBS LOGIC WITH LOGIN CHECK -->
<script>
const jobList = document.getElementById('jobList');
const jobPreview = document.getElementById('jobPreview');
let jobs = [];
let selectedIndex = null;

async function fetchJobs() {
  jobs = await window.sanityClient.fetch(`*[_type == "job"] | order(deadline asc){
    _id, title, company, description, location, salary, applyLink, posted, deadline, category, jobType, isSponsored, isPremier, sponsoredUntil, badge
  }`);
  renderJobs();
}

function renderJobs() {
  const searchTerm = document.getElementById('jobSearch').value.toLowerCase();
  const category = document.getElementById('categoryFilter').value;
  const today = new Date();

  const filtered = jobs.filter(j => {
    const matchCat = category === 'all' || j.category === category;
    const matchSearch = j.title.toLowerCase().includes(searchTerm) || j.company.toLowerCase().includes(searchTerm) || j.description.toLowerCase().includes(searchTerm);
    return matchCat && matchSearch;
  });

  filtered.sort((a,b) => {
    const aPriority = (a.isPremier && new Date(a.sponsoredUntil) >= today ? 2 : a.isSponsored && new Date(a.sponsoredUntil) >= today ? 1 : 0);
    const bPriority = (b.isPremier && new Date(b.sponsoredUntil) >= today ? 2 : b.isSponsored && new Date(b.sponsoredUntil) >= today ? 1 : 0);
    if (bPriority !== aPriority) return bPriority - aPriority;
    return new Date(a.deadline) - new Date(b.deadline);
  });

  jobList.innerHTML = '';
  if (!filtered.length) {
    jobList.innerHTML = '<li>No jobs found.</li>';
    jobPreview.innerHTML = '<p>Select a job to view details</p>';
    return;
  }

  filtered.forEach((job,index) => {
    const li = document.createElement('li');
    li.className = 'job-card';
    if (index === selectedIndex) li.classList.add('selected');

    let badgeText = '';
    if (job.badge) badgeText = job.badge;
    else if (job.isPremier && new Date(job.sponsoredUntil) >= today) badgeText = 'Premier';
    else if (job.isSponsored && new Date(job.sponsoredUntil) >= today) badgeText = 'Sponsored';

    li.innerHTML = `
      <h3>${job.title}</h3>
      <p class="company"><strong>Company:</strong> ${job.company || 'Confidential'}</p>
      <p class="meta"><strong>Location:</strong> ${job.location}</p>
      <p class="salary"><strong>Salary:</strong> ${job.salary || 'N/A'}</p>
      <p class="meta"><strong>Posted:</strong> ${job.posted || 'N/A'} • <strong>Closing:</strong> ${job.deadline || 'N/A'}</p>
      ${badgeText ? `<span class="job-badge">${badgeText}</span>` : ''}
    `;

    li.onclick = () => {
      selectedIndex = index;
      showPreview(job);
      renderJobs();
    };

    jobList.appendChild(li);
  });
}

function showPreview(job) {
  const today = new Date();
  let badgeText = '';
  if (job.badge) badgeText = job.badge;
  else if (job.isPremier && new Date(job.sponsoredUntil) >= today) badgeText = 'Premier';
  else if (job.isSponsored && new Date(job.sponsoredUntil) >= today) badgeText = 'Sponsored';

  const applyButton = currentUser
    ? `<a class="apply-btn" href="${job.applyLink}" target="_blank">Apply Now</a>`
    : `<a class="apply-btn" href="login.html">Login to Apply</a>`;

  jobPreview.innerHTML = `
    <div class="fade-in">
      <h2>${job.title}</h2>
      <p class="company"><strong>Company:</strong> ${job.company}</p>
      ${badgeText ? `<span class="job-badge">${badgeText}</span>` : ''}
      <p><strong>Location:</strong> ${job.location}</p>
      <p><strong>Salary:</strong> ${job.salary || 'N/A'}</p>
      <p><strong>Posted:</strong> ${job.posted || 'N/A'} | <strong>Closing:</strong> ${job.deadline || 'N/A'}</p>
      <div style="white-space:pre-line;margin-top:12px;">${job.description}</div>
      ${applyButton}
    </div>
  `;
}

document.getElementById('jobSearch').addEventListener('input', renderJobs);
document.getElementById('categoryFilter').addEventListener('change', renderJobs);
document.getElementById('sortBtn').addEventListener('click', renderJobs);

fetchJobs();

// ================= SCROLL BUTTONS =================
const up = document.getElementById('scrollUp');
const down = document.getElementById('scrollDown');
window.addEventListener('scroll', () => {
  up.style.display = down.style.display = window.scrollY > 300 ? 'block' : 'none';
});
up.onclick = () => window.scrollTo({top:0, behavior:'smooth'});
down.onclick = () => window.scrollTo({top:document.body.scrollHeight, behavior:'smooth'});
</script>
</body>
</html>






































