<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="UTF-8">
<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
<meta name="description" content="View all South African universities, application deadlines, and entry requirements. Apply early to secure your spot in 2026.">

<!-- Open Graph / Facebook -->
<meta property="og:title" content="South African Universities – Career Unified">
<meta property="og:description" content="Check application deadlines, entry requirements, and university opportunities in South Africa. Apply early and secure your spot.">
<meta property="og:url" content="https://careerunified.com/varsity.html">
<meta property="og:type" content="website">
<meta property="og:image" content="https://careerunified.com/images/social-share-varsity.png">

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="South African Universities – Career Unified">
<meta name="twitter:description" content="View all South African universities, application deadlines, and entry requirements. Apply early for 2026.">
<meta name="twitter:image" content="https://careerunified.com/images/social-share-varsity.png">

<!-- Structured Data placeholder -->
<script type="application/ld+json" id="varsity-schema">
{
  "@context": "https://schema.org",
  "@type": "ItemList",
  "name": "South African Universities",
  "itemListElement": []
}
</script>

<title>Varsity – Career Unified</title>
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/varsity.css">
<style>
/* =============================== */
/* RESET BODY & GLOBAL LAYOUT */
body {
  margin: 0;
  padding: 0;
  font-family: 'Poppins', sans-serif;
  background: #f5f5f7;
  color: #111827;
  overflow-x: hidden;
}

/* =============================== */
/* NAVBAR FULL WIDTH */
.main-nav {
  padding: 14px 30px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100vw;
  box-sizing: border-box;
  background: #1e3a8a;
}

.main-nav .logo {
  color: #fff;
  font-size: 1.4rem;
  font-weight: 700;
  text-decoration: none;
}

.main-nav .nav-links a {
  color: #fff;
  text-decoration: none;
  margin-left: 22px;
  font-weight: 600;
  padding-bottom: 4px;
}

.main-nav .nav-links a.active {
  border-bottom: 3px solid #facc15;
}

/* =============================== */
/* HEADER FULL WIDTH WITH GRADIENT */
header {
  text-align: center;
  padding: 70px 15px 55px;
  background: linear-gradient(90deg, #1e3a8a, #2563eb);
  color: #fff;
  margin: 0;
  width: 100vw;
  box-sizing: border-box;
}

header h1 {
  margin: 0;
  font-size: 3rem;
  font-weight: 800;
}

header p {
  margin-top: 10px;
  font-size: 1.2rem;
  font-weight: 500;
  color: #e5e7eb;
}

/* =============================== */
/* University List */
#varsityList {
  max-width: 1000px;
  margin: 0 auto 50px auto;
  padding: 0;
  list-style: none;
}

.varsity-card {
  background: #fff;
  border-radius: 10px;
  padding: 15px 20px;
  margin-bottom: 12px;
  box-shadow: 0 3px 8px rgba(0,0,0,0.08);
  transition: 0.25s ease;
}

.varsity-card:hover {
  background: #e0f2fe;
  transform: translateY(-2px);
}

.varsity-card a {
  font-size: 1.1rem;
  text-decoration: none;
  color: #1e3a8a;
  font-weight: 600;
}

.varsity-card small {
  display: block;
  color: #374151;
  margin-top: 4px;
}

.status { font-weight:600; margin-left:8px; }
.status.open { color:#16a34a; }
.status.closed { color:#dc2626; }
.urgent { color:#b91c1c; font-weight:600; margin-left:8px; }

/* Search + Sort */
#searchInput {
  padding:8px 12px;
  border-radius:6px;
  border:1px solid #ccc;
  width:60%;
  margin:0 10px 20px 0;
}
#sortDeadlineBtn {
  padding:8px 12px;
  border-radius:6px;
  border:none;
  background:#1e3a8a;
  color:white;
  cursor:pointer;
  font-weight:600;
}

/* Footer */
.main-footer {
  text-align:center;
  margin-top:50px;
  padding:25px 0;
  background:#1e3a8a;
  color:white;
  width:100vw;
  box-sizing:border-box;
}

/* Scroll Buttons */
.scroll-btn {
  position: fixed;
  right: 20px;
  padding: 10px 14px;
  border-radius: 50%;
  border: none;
  background: #1e3a8a;
  color: white;
  cursor: pointer;
  display: none;
  z-index: 999;
}
#scrollUp { bottom: 80px; }
#scrollDown { bottom: 30px; }

@media (max-width:900px){
  #searchInput{width:100%;margin-bottom:10px}
}

/* =============================== */
/* SKELETON LOADING */
.skeleton {
  position: relative;
  overflow: hidden;
  background: #e5e7eb;
}
.skeleton::after {
  content: "";
  position: absolute;
  top: 0;
  left: -100%;
  height: 100%;
  width: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.6), transparent);
  animation: shimmer 1.3s infinite;
}
@keyframes shimmer {
  100% { left: 100%; }
}

.skeleton-varsity {
  height: 70px;
  border-radius: 10px;
  margin-bottom: 12px;
}

  
</style>
</head>
<body>

<!-- NAVIGATION -->
<nav class="main-nav">
  <a href="index.html" class="logo">Career Unified</a>
  <div class="nav-links">
    <a href="jobs.html">Jobs</a>
    <a href="bursaries.html">Bursaries</a>
    <a href="varsity.html" class="active">Varsity</a>
    <a href="cv-generator.html">Generate CV</a>
  </div>
</nav>

<!-- HEADER -->
<header>
  <h1>South African Universities</h1>
  <p>Check application deadlines and apply early</p>
</header>

<!-- MAIN -->
<main>
  <div style="max-width:1000px; margin: 0 auto 50px auto;">
    <input type="text" id="searchInput" placeholder="Search universities..." />
    <button id="sortDeadlineBtn">Sort by Earliest Deadline</button>
    <ul id="varsityList"></ul>
  </div>
</main>

<!-- FOOTER -->
<footer class="main-footer">
  <div class="footer-links">
    <a href="about-us.html">About Us</a>
    <a href="privacy.html">Privacy Policy</a>
    <a href="terms.html">Terms & Conditions</a>
    <a href="contact-us.html">Contact Us</a>
  </div>
  <p>© 2026 Career Unified. All rights reserved.</p>
</footer>

<!-- SCROLL BUTTONS -->
<button id="scrollUp" class="scroll-btn">↑</button>
<button id="scrollDown" class="scroll-btn">↓</button>

<script src="js/sanityClient.js"></script>
<script>
// ===== Skeleton loader =====
function showVarsitySkeletons(){
  varsityList.innerHTML = "";
  for(let i=0;i<8;i++){
    const li = document.createElement("li");
    li.className = "varsity-card skeleton skeleton-varsity";
    varsityList.appendChild(li);
  }
}
showVarsitySkeletons();

  
const varsityList = document.getElementById('varsityList');
const searchInput = document.getElementById('searchInput');
const sortBtn = document.getElementById('sortDeadlineBtn');
let universities = [];

let globalSearch = localStorage.getItem("homeSearchTerm");
if(globalSearch){
  searchInput.value = globalSearch;
  localStorage.removeItem("homeSearchTerm");
}

// ===== Cache system =====
const VARSITY_CACHE = "careerUnifiedVarsityCache";
const VARSITY_CACHE_TIME = "careerUnifiedVarsityCacheTime";
const CACHE_TTL = 5 * 60 * 1000;

// ===== Load cache instantly =====
const cached = localStorage.getItem(VARSITY_CACHE);
if (cached) {
  try {
    universities = JSON.parse(cached);
    injectUniversitySchema();
    renderList();
  } catch(e){}
}
  
async function fetchUniversities() {
  universities = await window.sanityClient.fetch(`
    *[_type=="university"] | order(deadline asc){
      _id,
      name,
      applicationLink,
      deadline,
      notes
    }
  `);
// ===== Save to cache =====
localStorage.setItem(VARSITY_CACHE, JSON.stringify(universities));
localStorage.setItem(VARSITY_CACHE_TIME, Date.now());

  injectUniversitySchema();
  renderList();
}

function injectUniversitySchema() {
  const schema = {
    "@context": "https://schema.org",
    "@type": "ItemList",
    "name": "South African Universities",
    "itemListElement": universities.map((u, index) => ({
      "@type": "CollegeOrUniversity",
      "position": index + 1,
      "name": u.name,
      "url": u.applicationLink || "https://careerunified.com/varsity.html",
      "applicationDeadline": u.deadline || undefined
    }))
  };

  const old = document.getElementById("varsity-schema");
  if (old) old.remove();

  const script = document.createElement("script");
  script.id = "varsity-schema";
  script.type = "application/ld+json";
  script.textContent = JSON.stringify(schema);
  document.head.appendChild(script);
}

// Fetch on page load
const last = localStorage.getItem(VARSITY_CACHE_TIME);
if (!last || Date.now() - last > CACHE_TTL) {
  fetchUniversities();    // no cache or expired
} else {
  fetchUniversities();    // background refresh
}

setInterval(fetchUniversities, 5 * 60 * 1000);



function renderList() {
  const query = searchInput.value.toLowerCase();
  varsityList.innerHTML = '';
  const filtered = universities.filter(u =>
    u.name.toLowerCase().includes(query)
  );

  if (!filtered.length) {
    varsityList.innerHTML = "<li>No universities match your search.</li>";
    return;
  }

  const today = new Date();

  filtered.forEach(uni => {
    const deadlineDate = uni.deadline ? new Date(uni.deadline) : null;
    const isOpen = deadlineDate ? deadlineDate >= today : true;
    const diffDays = deadlineDate
      ? Math.ceil((deadlineDate - today) / (1000*60*60*24))
      : null;
    const isUrgent = diffDays !== null && diffDays <= 7 && isOpen;

    const safeUrl =
      uni.applicationLink && uni.applicationLink.startsWith('http')
        ? uni.applicationLink
        : null;

    const li = document.createElement('li');
    li.className = "varsity-card";
    li.innerHTML = `
      ${safeUrl
        ? `<a href="${safeUrl}" target="_blank" rel="noopener noreferrer">${uni.name}</a>`
        : `<span>${uni.name}</span>`
      }
      <small>Deadline: ${uni.deadline || 'TBA'}</small>
      <span class="status ${isOpen ? 'open' : 'closed'}">
        ${isOpen ? 'Open' : 'Closed'}
      </span>
      ${isUrgent ? '<span class="urgent">Urgent!</span>' : ''}
    `;
    varsityList.appendChild(li);
  });
}

searchInput.addEventListener('input', renderList);
sortBtn.addEventListener('click', () => {
  universities.sort((a,b) => new Date(a.deadline) - new Date(b.deadline));
  renderList();
});



// SCROLL BUTTONS
const up = document.getElementById('scrollUp');
const down = document.getElementById('scrollDown');
window.addEventListener('scroll', () => {
  up.style.display = down.style.display = window.scrollY > 300 ? 'block' : 'none';
});
up.onclick = () => window.scrollTo({top:0, behavior:'smooth'});
down.onclick = () => window.scrollTo({top:document.body.scrollHeight, behavior:'smooth'});
</script>

</body>
</html>


















